{"version":3,"sources":["model/Enums.js","Utils.js","service/GameService.js","service/PlayerService.js","model/Player.js","service/ConfigService.js","components/game/Hand.js","components/game/MiddleSection.js","components/game/FooterSection.js","components/RulesSection.js","components/Straight5.js","App.js","reportWebVitals.js","index.js"],"names":["ActionType","PASS","SWAP","CHANGE_TURN","TURN_FACE_UP","CLAIM_TOKEN","AppMode","START_STATE","GAME","PLAYER_WIN","DrawType","DECK","DISCARD","MoveState","CARD_DRAWN","DISCARD_CHOSEN","CARD_DISCARDED","SWAP_CHOSEN","SWAP_IN_PROGRESS","PRE_END_STATE","CLAIMING_TOKEN","TokenType","THREE_IN_A_ROW","FOUR_IN_A_ROW","FIVE_IN_A_ROW","THREE_OF_A_KIND","FULL_HOUSE","require","shuffleArray","array","i","length","j","Math","floor","random","getPlayerTextForMoveState","moveState","cardIndex","GameService","playerService","configService","this","deck","discard","swapCardIndex","activeCard","activePlayerIndex","tokenToClaim","repeats","getRepeatsPerNumber","max","getMaxNumberInDeck","push","value","seen","getDeck","setDeck","getDiscard","splice","card","pop","setActiveCard","getTopCardFromDeck","index","console","error","getSwapCardIndex","playerCards","getActivePlayersDeck","temp","setSwapCardIndex","getActiveCard","createDeck","dealCardsToPlayers","initializeDiscard","setActivePlayerIndex","setTokenToClaim","canClaimToken","token","getActivePlayersTokens","includes","won","three_map","Object","keys","fh_map","getActivePlayerIndex","getNumberOfPlayers","getTokenToClaim","prev","list","playerDeck","getPlayers","getTokens","Player","PlayerService","players","resetPlayers","tokens","ConfigService","maxNumberInDeck","repeatsPerNumber","numberOfPlayers","numberOfDiscards","classNames","Hand","props","render","className","role","name","id","map","cardCanBePressed","onClick","cardPressedCallback","xmlns","width","height","viewBox","d","TableCanvas","React","createRef","bind","gameService","Component","canDrawCard","drawCallback","getTopDiscardValue","ShowCardActions","ShowTurnUpAction","activePlayerHasAllCardsFaceUp","ShowEndActions","ShowToken","Fragment","buttonPressedCallback","targetTokens","maxTokens","href","Straight5","StartNewGame","startNewGame","setState","DrawCard","type","state","drawCardFromDeck","drawCardFromDiscard","ReplaceCard","replaceCard","EndMove","DiscardCard","discardActiveCard","TurnCardFaceUp","turnCardFaceUp","SwapCards","swapIsValid","swapCards","activePlayerCanClaimToken","ChangeTurn","ClaimTokenCardPress","isValidIndexForToken","claimToken","checkIfWinner","nextPlayer","handleActionButtonPressed","action","handlePlayerCardPressed","player","log","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.150c599a.chunk.js","sourcesContent":["export const ActionType = {\n  PASS: 'PASS',\n  SWAP: 'SWAP',\n  CHANGE_TURN: 'CHANGE_TURN',\n  TURN_FACE_UP: 'TURN_FACE_UP',\n  CLAIM_TOKEN: 'CLAIM_TOKEN'\n}\n\nexport const AppMode = {\n  START_STATE: 'START_STATE',\n  GAME: 'GAME',\n  PLAYER_WIN: 'PLAYER_WIN'\n}\n\nexport const DrawType = {\n  DECK: 'DECK',\n  DISCARD: 'DISCARD'\n}\n\nexport const MoveState = {\n  START_STATE:  'START_STATE',\n  CARD_DRAWN: 'CARD_DRAWN',\n  DISCARD_CHOSEN: 'DISCARD_CHOSEN',\n  CARD_DISCARDED: 'CARD_DISCARDED',\n  SWAP_CHOSEN: 'SWAP_CHOSEN',\n  SWAP_IN_PROGRESS: 'SWAP_IN_PROGRESS',\n  PRE_END_STATE: 'PRE_END_STATE',\n  CLAIMING_TOKEN: 'CLAIMING_TOKEN'\n}\n\nexport const TokenType = {\n  THREE_IN_A_ROW: 'THREE_IN_A_ROW',\n  FOUR_IN_A_ROW: 'FOUR_IN_A_ROW',\n  FIVE_IN_A_ROW: 'FIVE_IN_A_ROW',\n  THREE_OF_A_KIND: 'THREE_OF_A_KIND',\n  FULL_HOUSE: 'FULL_HOUSE'\n}\n","const {MoveState} = require('./model/Enums.js')\n\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n  return array;\n}\n\nfunction getPlayerTextForMoveState(moveState, cardIndex) {\n  switch (moveState) {\n    case MoveState.START_STATE:\n      return 'Please draw a card from Deck or Discard'\n    case MoveState.CARD_DRAWN:\n      return 'Replace card in your hand or choose a discard option';\n    case MoveState.DISCARD_CHOSEN:\n      return 'Select the first card to turn face up'\n    case MoveState.CARD_DISCARDED:\n      return 'Select the second card to turn face up or pass'\n    case MoveState.SWAP_CHOSEN:\n      return 'Select the first card you\\'d like  to swap'\n    case MoveState.SWAP_IN_PROGRESS:\n      return 'Selected ' + cardIndex + '. Please select a second card to swap'\n    case MoveState.PRE_END_STATE:\n      return 'Please select a token to claim or pass'\n    case MoveState.CLAIMING_TOKEN:\n      return 'Please select the first card of your run';\n    default:\n      return 'UNKONWN STATE DETECTED'\n  }\n}\n\nexport {shuffleArray, getPlayerTextForMoveState};\n","const { shuffleArray } = require('../Utils.js')\nconst { TokenType } = require('../model/Enums.js')\nclass GameService {\n\n  constructor(playerService, configService) {\n      this.playerService = playerService;\n      this.configService = configService;\n\n      this.deck = [];\n      this.discard = [[]];\n      this.swapCardIndex = -1;\n      this.activeCard = {};\n      this.activePlayerIndex = 0;\n      this.tokenToClaim = '';\n  }\n\n  createDeck() {\n    const repeats = this.configService.getRepeatsPerNumber();\n    const max = this.configService.getMaxNumberInDeck();\n    this.deck = [];\n    for (let i = 0; i < repeats; i++) {\n      for (let j = 0; j < max; j++) {\n        this.deck.push({value: j+1, seen: false})\n      }\n    }\n    shuffleArray(this.deck);\n  }\n\n  getTopCardFromDeck() {\n    if (this.getDeck().length === 0) {\n      this.setDeck([]);\n      for(let i = 0; i < this.getDiscard().length; i ++) {\n        this.getDeck().push(...this.getDiscard()[i].splice(0, this.getDiscard()[i].length - 1));\n      }\n      shuffleArray(this.getDeck());\n    }\n    const card = this.getDeck().pop();\n    card.seen = false;\n    return card;\n  }\n\n  drawCardFromDeck() {\n    this.setActiveCard(this.getTopCardFromDeck());\n  }\n\n  drawCardFromDiscard(index) {\n    if (this.getDiscard()[index].length === 0) {\n      console.error('SOMETHING went wrong, discard length = 0')\n    }\n    this.setActiveCard(this.getDiscard()[index].pop());\n  }\n\n  initializeDiscard() {\n    this.getDiscard()[0].push(this.getDeck().pop());\n  }\n\n  swapIsValid(index) {\n    return this.getSwapCardIndex() > 0 && this.getSwapCardIndex() !== index;\n  }\n\n  swapCards(index) {\n    const playerCards = this.getActivePlayersDeck();\n    const temp = playerCards[index];\n    playerCards[index] = playerCards[this.swapCardIndex];\n    playerCards[this.swapCardIndex] = temp;\n    this.setSwapCardIndex(-1);\n  }\n\n  replaceCard(index) {\n    this.getActiveCard().seen = true;\n    //TODO come back to this to pick discard\n    this.getDiscard()[0].push(this.getActivePlayersDeck()[index])\n    this.getActivePlayersDeck()[index] = this.getActiveCard();\n    this.setActiveCard({});\n  }\n\n  turnCardFaceUp(index) {\n    const card = this.getActivePlayersDeck()[index];\n    if (this.getActivePlayersDeck()[index].seen === true) {\n      return false;\n    }\n    card.seen = true;\n    return true;\n  }\n\n  discardActiveCard() {\n    //TODO come back to this to pick discard\n    this.getDiscard()[0].push(this.getActiveCard());\n    this.setActiveCard({});\n  }\n\n  startNewGame() {\n    this.createDeck();\n    this.playerService.dealCardsToPlayers(this.getDeck());\n    this.initializeDiscard();\n    this.setSwapCardIndex(-1);\n    this.setActiveCard({});\n    this.setActivePlayerIndex(0);\n    this.setTokenToClaim('');\n  }\n\n  activePlayerCanClaimToken() {\n    return this.canClaimToken(TokenType.THREE_IN_A_ROW) ||\n     this.canClaimToken(TokenType.FOUR_IN_A_ROW) ||\n     this.canClaimToken(TokenType.FIVE_IN_A_ROW) ||\n     this.canClaimToken(TokenType.THREE_OF_A_KIND) ||\n     this.canClaimToken(TokenType.FULL_HOUSE);\n  }\n\n  canClaimToken(token) {\n    const deck = this.getActivePlayersDeck();\n    const existing_tokens = this.getActivePlayersTokens();\n    if (existing_tokens.includes(token)) {\n      return false;\n    }\n\n    switch (token) {\n      case TokenType.THREE_IN_A_ROW:\n        for (let j = 0; j < 3; j ++) {\n          let won = true;\n          if (!deck[j].seen) {\n            continue\n          }\n          for (let i = j+1; i < 3+j; i ++) {\n            if (!deck[i].seen || deck[i].value !== deck[i-1].value + 1) {\n              won = false;\n              break;\n            }\n          }\n          if (won) {\n            return true\n          }\n        }\n        return false;\n      case TokenType.FOUR_IN_A_ROW:\n        for (let j = 0; j < 2; j ++) {\n          let won = true;\n          if (!deck[j].seen) {\n            continue\n          }\n          for (let i = j+1; i < 4+j; i ++) {\n            if (!deck[i].seen || deck[i].value !== deck[i-1].value + 1) {\n              won = false;\n              break;\n            }\n          }\n          if (won) {\n            return true\n          }\n        }\n        return false;\n      case TokenType.FIVE_IN_A_ROW:\n        if (!deck[0].seen) {\n          return false\n        }\n        for (let i = 1; i < 5; i ++) {\n          if (!deck[i].seen || deck[i].value !== deck[i-1].value + 1) {\n            return false\n          }\n        }\n        return true;\n      case TokenType.THREE_OF_A_KIND:\n        let three_map = {};\n        for (let i = 0; i < 5; i++) {\n          if (!deck[i].seen) {\n            continue;\n          }\n          if (!three_map[deck[i].value]) {\n            three_map[deck[i].value] = 0\n          }\n          three_map[deck[i].value] = three_map[deck[i].value] + 1\n        }\n\n        for (let key of Object.keys(three_map)) {\n          if (three_map[key] >= 3) {\n            return true;\n          }\n        }\n        return false;\n      case TokenType.FULL_HOUSE:\n        let fh_map = {};\n        for (let i = 0; i < 5; i++) {\n          if (!deck[i].seen) {\n            continue;\n          }\n          if (!fh_map[deck[i].value]) {\n            fh_map[deck[i].value] = 0\n          }\n          fh_map[deck[i].value] = fh_map[deck[i].value] + 1\n        }\n        const keys = Object.keys(fh_map);\n        if (keys.length !== 2) {\n          return false;\n        }\n        return (fh_map[keys[0]] === 2 && fh_map[keys[1]] === 3) || (fh_map[keys[0]] === 3 && fh_map[keys[1]] === 2)\n    }\n    return false;\n  }\n\n  nextPlayer() {\n    this.setActivePlayerIndex(this.getActivePlayerIndex() + 1 === this.configService.getNumberOfPlayers() ? 0 : this.getActivePlayerIndex() + 1);\n  }\n\n  isValidIndexForToken(index) {\n    const deck = this.getActivePlayersDeck();\n    if ([TokenType.THREE_OF_A_KIND, TokenType.FULL_HOUSE, TokenType.FIVE_IN_A_ROW].includes(this.getTokenToClaim())) {\n      return this.canClaimToken(deck, this.getTokenToClaim(), this.getActivePlayersTokens());\n    }\n    if (this.getTokenToClaim() === TokenType.THREE_IN_A_ROW) {\n      // if index is 3 that is 4th card. 3+4 not enough cards for THREE_IN_A_ROW\n      if (!deck[index].seen || index >= 3) {\n        return false;\n      }\n      let prev = deck[index].value;\n      for (let i = index + 1; i < index + 3; i++) {\n\n        if (!deck[i].seen || deck[i].value !== ++prev)  {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (this.getTokenToClaim() === TokenType.FOUR_IN_A_ROW) {\n      // if index is 2 that is 3rd card. 2+3+4 not enough cards for THREE_IN_A_ROW\n      if (!deck[index].seen || index >= 2) {\n        return false;\n      }\n      let prev = deck[index].value;\n      for (let i = index + 1; i < index + 4; i++) {\n\n        if (!deck[i].seen || deck[i].value !== ++prev)  {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  claimToken(index) {\n    const deck = this.getActivePlayersDeck();\n    switch (this.getTokenToClaim()) {\n      case TokenType.FIVE_IN_A_ROW:\n      case TokenType.FULL_HOUSE:\n        for (let i = 0; i < deck.length; i ++) {\n          //TODO come back to this to pick discard\n          this.getDiscard()[0].push(deck[i]);\n          deck[i] = this.getTopCardFromDeck();\n        }\n        break;\n      case TokenType.THREE_OF_A_KIND:\n        let three_map = {};\n        for (let i = 0; i < 5; i++) {\n          if (!deck[i].seen) {\n            continue;\n          }\n          if (!three_map[deck[i].value]) {\n            three_map[deck[i].value] = []\n          }\n          three_map[deck[i].value].push(i);\n          if (three_map[deck[i].value].length >= 3) {\n            const list = three_map[deck[i].value];\n            for (let j = 0; j < list.length; j ++) {\n              //TODO come back to this to pick discard\n              this.getDiscard()[0].push(deck[list[j]]);\n              deck[list[j]] = this.getTopCardFromDeck();\n            }\n            break;\n          }\n        }\n        break;\n      case TokenType.THREE_IN_A_ROW:\n      for (let i = index; i < index + 3; i++) {\n        //TODO come back to this to pick discard\n        this.getDiscard()[0].push(deck[i]);\n        deck[i] = this.getTopCardFromDeck();\n        deck[i].seen = false;\n      }\n        break;\n      case TokenType.FOUR_IN_A_ROW:\n      for (let i = index; i < index + 4; i++) {\n        //TODO come back to this to pick discard\n        this.getDiscard()[0].push(deck[i]);\n        deck[i] = this.getTopCardFromDeck();\n      }\n        break;\n      default:\n        console.error('something went wrong');\n        return\n    }\n    this.getActivePlayersTokens().push(this.getTokenToClaim());\n    this.setTokenToClaim('');\n  }\n\n  activePlayerHasAllCardsFaceUp() {\n    const playerDeck = this.getActivePlayersDeck()\n    for (let i = 0; i < playerDeck.length; i++) {\n      if (!playerDeck[i].seen) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  getActivePlayersTokens() {\n    return this.playerService.getPlayers()[this.getActivePlayerIndex()].getTokens();\n  }\n\n  getActivePlayersDeck() {\n    return this.playerService.getPlayers()[this.getActivePlayerIndex()].getDeck();\n  }\n\n  getDeck() {\n    return this.deck;\n  }\n\n  getDiscard() {\n    return this.discard;\n  }\n\n  getSwapCardIndex() {\n    return this.swapCardIndex;\n  }\n\n  getActiveCard() {\n    return this.activeCard;\n  }\n\n  getActivePlayerIndex() {\n    return this.activePlayerIndex;\n  }\n\n  getTokenToClaim() {\n    return this.tokenToClaim;\n  }\n\n  setDeck(deck) {\n    this.deck = deck;\n  }\n\n  setDiscard(discard) {\n    this.discard = discard;\n  }\n\n  setSwapCardIndex(swapCardIndex) {\n    this.swapCardIndex = swapCardIndex;\n  }\n\n  setActiveCard(activeCard) {\n    this.activeCard = activeCard;\n  }\n\n  setActivePlayerIndex(activePlayerIndex) {\n    this.activePlayerIndex = activePlayerIndex;\n  }\n\n  setTokenToClaim(tokenToClaim) {\n    this.tokenToClaim = tokenToClaim;\n  }\n}\n\nexport {GameService};\n","const {Player} = require('../model/Player.js');\n\nclass PlayerService {\n\n  constructor(configService) {\n    this.configService = configService;\n    this.players = [];\n    this.resetPlayers();\n  }\n\n  resetPlayers() {\n    this.players = [];\n    for (let i = 0; i < this.configService.getNumberOfPlayers(); i ++) {\n      this.players.push(new Player([], []));\n    }\n  }\n\n  dealCardsToPlayers(deck) {\n    for (let j = 0; j < 5; j++) {\n      for (let i = 0; i < this.getPlayers().length; i ++) {\n        this.players[i].getDeck().push(deck.pop());\n      }\n    }\n  }\n\n  getPlayers() {\n    return this.players;\n  }\n\n  setPlayers(players) {\n    this.players = players;\n  }\n\n}\n\nexport {PlayerService};\n","class Player {\n\n  constructor(deck, tokens) {\n      this.deck = deck;\n      this.tokens = tokens; // THREE_IN_A_ROW, FOUR_IN_A_ROW, FIVE_IN_A_ROW, THREE_OF_A_KIND, FULL_HOUSE\n  }\n\n  getDeck() {\n    return this.deck;\n  }\n\n  getTokens() {\n    return this.tokens;\n  }\n\n  setDeck(deck) {\n    this.deck = deck;\n  }\n\n  setTokens(tokens) {\n    this.tokens = tokens;\n  }\n}\n\nexport {Player};\n","class ConfigService {\n\n  constructor(maxNumberInDeck, repeatsPerNumber, numberOfPlayers, numberOfDiscards) {\n    this.maxNumberInDeck = maxNumberInDeck;\n    this.repeatsPerNumber = repeatsPerNumber;\n    this.numberOfPlayers = numberOfPlayers;\n    this.numberOfDiscards = numberOfDiscards;\n  }\n\n  getMaxNumberInDeck() {\n    return this.maxNumberInDeck;\n  }\n\n  getRepeatsPerNumber() {\n    return this.repeatsPerNumber;\n  }\n\n  getNumberOfPlayers() {\n    return this.numberOfPlayers;\n  }\n\n  getNumberOfDiscards() {\n    return this.numberOfDiscards;\n  }\n\n}\n\nexport {ConfigService};\n","import React, { Component } from 'react';\nimport './Hand.css';\nconst classNames = require('classnames');\nconst {MoveState} = require('../../model/Enums.js')\n\nclass Hand extends Component {\n  constructor(props) {\n    super(props);\n    this.TableCanvas = React.createRef();\n    this.render.bind(this);\n    this.deck = this.props.playerService.getPlayers()[this.props.id].getDeck();\n    this.tokens = this.props.playerService.getPlayers()[this.props.id].getTokens();\n  }\n\n  // TODO maybe add this for claimToken logic. Think too much\n  // TODO the 0/4 win tracking should be done dynamically and pass in rather than hard-coded\n   // TODO testing lol!\n  cardCanBePressed(card, index) {\n    return this.props.id === this.props.gameService.getActivePlayerIndex()\n     && (\n       ([MoveState.DISCARD_CHOSEN, MoveState.CARD_DISCARDED].includes(this.props.moveState) && !card.seen)\n           ||\n       (MoveState.SWAP_IN_PROGRESS === this.props.moveState && this.props.gameService.getSwapCardIndex() !== index)\n           ||\n       [MoveState.CARD_DRAWN, MoveState.SWAP_CHOSEN,  MoveState.CLAIMING_TOKEN].includes(this.props.moveState));\n  }\n\n  render = () => {\n    return (\n      <div className=\"PlayerHand\" data-testid=\"hand\">\n        <div role=\"header\" className=\"PlayerHeader\" name=\"Player1\">\n          <p className=\"playerTag\">Player {this.props.id+1}</p>\n        </div>\n        <div className=\"PlayerTokenHeader\">\n          <p className=\"playerTag\">Tokens [{this.tokens.length}/4]</p>\n        </div>\n        {this.deck.map((card, index) => (\n          <div className=\"PlayerCardWrapper\" key={index}>\n          <div className={classNames('PlayerCard', {'PlayerCardBack': !card.seen}, {'PlayerCardFront': card.seen}, {\"PlayerCardIsActive\" : this.cardCanBePressed(card, index)})} role='playerCard' onClick={() => this.props.cardPressedCallback(this.props.id, index)}>\n            {card.seen ? card.value : <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm1.25 17c0 .69-.559 1.25-1.25 1.25-.689 0-1.25-.56-1.25-1.25s.561-1.25 1.25-1.25c.691 0 1.25.56 1.25 1.25zm1.393-9.998c-.608-.616-1.515-.955-2.551-.955-2.18 0-3.59 1.55-3.59 3.95h2.011c0-1.486.829-2.013 1.538-2.013.634 0 1.307.421 1.364 1.226.062.847-.39 1.277-.962 1.821-1.412 1.343-1.438 1.993-1.432 3.468h2.005c-.013-.664.03-1.203.935-2.178.677-.73 1.519-1.638 1.536-3.022.011-.924-.284-1.719-.854-2.297z\"/></svg> }\n          </div>\n          </div>\n        ))}\n        <div className='PlayerTokens'>\n        {this.tokens.map((token, index) => (\n          <div className='PlayerToken' role='playerToken' key={index}>\n            {token}\n          </div>\n        ))}\n        </div>\n      </div>\n  )}\n}\n\nexport default Hand;\n","import React, { Component } from 'react';\nimport './MiddleSection.css';\nconst {DrawType, MoveState} = require('../../model/Enums.js')\nconst classNames = require('classnames');\n\nclass Hand extends Component {\n  constructor(props) {\n    super(props);\n    this.TableCanvas = React.createRef();\n    this.render.bind(this);\n    this.gameService = props.gameService;\n  }\n\n  getTopDiscardValue(index) {\n    const discard = this.gameService.getDiscard()[index];\n    return discard.length > 0 ? discard[discard.length-1].value : '';\n  }\n\n  canDrawCard() {\n    return this.props.moveState === MoveState.START_STATE;\n  }\n\n  // TODO - move this.state.MoveState to a dedicated service.\n  // Now MOVE STATE IS HERE DO WE WANT TO MOVE THE DRAW LOGIC DOWN OR  KEEP IT HIGHER?\n  // TODO mobile playable\n  render = () => {\n    return (\n      <div className=\"MiddleSection\" data-testid=\"middle-section\">\n      {this.gameService.getDiscard().map((discard, index) => (\n        <div className=\"DiscardSection\" key={index}>\n          <div className=\"FullWidth\" role=\"header\">\n            Discard {index + 1}\n          </div>\n          <div className=\"PlayerCardWrapper\">\n            <div className={classNames('PlayerCard', 'PlayerCardFront', {\"PlayerCardIsActive\" : this.canDrawCard()})} data-testid={'middle-section-discard-' + index} onClick={() => {this.props.drawCallback(DrawType.DISCARD, index)}}>\n              {this.getTopDiscardValue(index)}\n            </div>\n          </div>\n        </div>\n      ))}\n        <div className=\"DeckSection\">\n          <div className=\"FullWidth\" role=\"header\">\n            Deck\n          </div>\n          <div className={classNames('PlayerCard', 'PlayerCardBack', {\"PlayerCardIsActive\" : this.canDrawCard()})} data-testid=\"middle-section-deck\" onClick={() => {this.props.drawCallback(DrawType.DECK)}}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm1.25 17c0 .69-.559 1.25-1.25 1.25-.689 0-1.25-.56-1.25-1.25s.561-1.25 1.25-1.25c.691 0 1.25.56 1.25 1.25zm1.393-9.998c-.608-.616-1.515-.955-2.551-.955-2.18 0-3.59 1.55-3.59 3.95h2.011c0-1.486.829-2.013 1.538-2.013.634 0 1.307.421 1.364 1.226.062.847-.39 1.277-.962 1.821-1.412 1.343-1.438 1.993-1.432 3.468h2.005c-.013-.664.03-1.203.935-2.178.677-.73 1.519-1.638 1.536-3.022.011-.924-.284-1.719-.854-2.297z\"/></svg>\n              </div>\n            </div>\n      </div>\n  )}\n}\n\nexport default Hand;\n","import React, { Component } from 'react';\nimport './FooterSection.css';\nconst { ActionType, MoveState, TokenType } = require('../../model/Enums.js')\nconst { getPlayerTextForMoveState } = require('../../Utils.js')\n\nclass Hand extends Component {\n  constructor(props) {\n    super(props);\n    this.gameService = props.gameService;\n    this.TableCanvas = React.createRef();\n    this.render.bind(this);\n  }\n\n  ShowCardActions = () => {\n    return [MoveState.CARD_DRAWN, MoveState.DISCARD_CHOSEN, MoveState.CARD_DISCARDED, MoveState.SWAP_CHOSEN, MoveState.SWAP_IN_PROGRESS].includes(this.props.moveState)\n  }\n\n  ShowTurnUpAction = () => {\n    return !this.gameService.activePlayerHasAllCardsFaceUp();\n  }\n\n  ShowEndActions = () => {\n    return this.props.moveState === MoveState.PRE_END_STATE;\n  }\n\n  ShowToken = token => {\n    return this.gameService.canClaimToken(token);\n  }\n\n  // TODO MUM color palette here so the buttons are less identical.\n\n  render = () => {\n    return (\n      <div className=\"CardTableFooter\" data-testid=\"footer-section\">\n        <div className=\"FullWidth\" role='header'>\n          {getPlayerTextForMoveState(this.props.moveState, this.gameService.getSwapCardIndex() + 1)}\n        </div>\n        {this.ShowCardActions() &&\n          <React.Fragment>\n              {(!!this.gameService.getActiveCard() && !!this.gameService.getActiveCard().value) &&\n              <React.Fragment>\n                <div className=\"PlayerCard PlayerCardFront\" role=\"activeCard\">\n                  {this.gameService.getActiveCard().value}\n                </div>\n                <div>\n                  {this.ShowTurnUpAction() && <button data-testid='turn-face-up-button' onClick={() => {this.props.buttonPressedCallback(ActionType.TURN_FACE_UP)}}> Discard to turn two face up </button>}\n                  <button onClick={() => {this.props.buttonPressedCallback(ActionType.SWAP)}}> Discard to swap two </button>\n                </div>\n            </React.Fragment>}\n            <div className=\"FullWidth\"><button className=\"mb-2 FullWidth\" onClick={() => {this.props.buttonPressedCallback(ActionType.PASS)}}> Pass </button></div>\n\n          </React.Fragment>}\n\n          {this.ShowEndActions() &&\n            <React.Fragment>\n                {this.ShowToken(TokenType.THREE_IN_A_ROW) && <div><button onClick={() => this.props.buttonPressedCallback(ActionType.CLAIM_TOKEN, TokenType.THREE_IN_A_ROW)}> THREE IN A ROW </button></div>}\n                {this.ShowToken(TokenType.FOUR_IN_A_ROW) && <div><button onClick={() => this.props.buttonPressedCallback(ActionType.CLAIM_TOKEN, TokenType.FOUR_IN_A_ROW)}> FOUR IN A ROW </button></div>}\n                {this.ShowToken(TokenType.FIVE_IN_A_ROW) && <div><button onClick={() => this.props.buttonPressedCallback(ActionType.CLAIM_TOKEN, TokenType.FIVE_IN_A_ROW)}> FIVE IN A ROW </button></div>}\n                {this.ShowToken(TokenType.THREE_OF_A_KIND) && <div><button onClick={() => this.props.buttonPressedCallback(ActionType.CLAIM_TOKEN, TokenType.THREE_OF_A_KIND)}> THREE OF A KIND </button></div>}\n                {this.ShowToken(TokenType.FULL_HOUSE) && <div><button onClick={() => this.props.buttonPressedCallback(ActionType.CLAIM_TOKEN, TokenType.FULL_HOUSE)}> FULL HOUSE </button></div>}\n                <div className=\"FullWidth\"><button className=\"mb-2 FullWidth\" onClick={() => {this.props.buttonPressedCallback(ActionType.CHANGE_TURN)}}> Pass </button></div>\n            </React.Fragment>}\n      </div>\n  )}\n}\n\nexport default Hand;\n","import React, { Component } from 'react';\nimport './RulesSection.css';\n\nclass Hand extends Component {\n  constructor(props) {\n    super(props);\n    this.render.bind(this);\n    this.targetTokens = 4;\n    this.maxTokens = 5;\n  }\n\n  // TODO ability to show rules anytime? (Maybe pop-up)\n  // TODO Ability to change some core settings\n\n  render = () => {\n    return (\n      <div className=\"rulesSection\" data-testid=\"rules-section\">\n        <div className=\"secondary-background\">\n          <h3 className=\"rules-header\">Rules</h3>\n        </div>\n        <div className=\"secondary-background\">\n          <h4 className=\"rules-header\">Introduction</h4>\n          <p className=\"rules-p\">Welcome to Straight 5, a rummy-like, yahtzee-like card game! This is the (work-in-progress) digitial version of the (hopefully future) Straight 5 game. </p>\n        </div>\n\n        <div className=\"primary-background\">\n          <h4 className=\"rules-header\">Winning</h4>\n          <p className=\"rules-p\">\n          The first player to claim {this.targetTokens} out of {this.maxTokens} tokens below wins.</p>\n          <ul>\n            <li>Three in a row</li>\n            <li>Four in a row</li>\n            <li>Five in a row</li>\n            <li>Three of a kind</li>\n            <li>Full House</li>\n          </ul>\n        </div>\n        <div className=\"secondary-background\">\n          <h4 className=\"rules-header\">Set up</h4>\n          <p className=\"rules-p\">Each player begins with 5 cards face-down in front of them.\n          The top card of the deck will be turned over as a discard</p>\n        </div>\n        <div className=\"primary-background\">\n          <h4 className=\"rules-header\">Turn Order</h4>\n          <p className=\"rules-p\">Each consists of three phases:</p>\n          <ol>\n            <li><h4 className=\"phaseHeader\">Draw Phase:</h4> draw the top card of the deck or discard piles</li>\n            <li><h4 className=\"phaseHeader\">Play Phase:</h4> in this phase you can either place the card you drew in front or discard your to:\n              <ul>\n                <li> Turn up to two cards face-up</li>\n                <li> Swap any two cards </li>\n              </ul>\n            </li>\n            <li><h4 className=\"phaseHeader\">Token Phase</h4>: if you have the cards face-up you may choose to discard them to claim a token.</li>\n          </ol>\n        </div>\n        <div className=\"secondary-background\">\n          <h4 className=\"rules-header\">Rule Clarifications</h4>\n          <p className=\"rules-p\">Here are some clarifications on rules above:</p>\n          <ol>\n            <li>When you place the drawn card in front of you, you do not get to take another action</li>\n            <li>You can only claim each token once</li>\n            <li>The cards to claim the tokens for the straights (3/4/5 in a row) must be adjacent and in ascending order (e.g. 1 2 3 not 3 2 1 or 1 3 2)</li>\n            <li>The cards to claim the tokens for three of a kind and full house can be anywhere</li>\n          </ol>\n        </div>\n        <div className=\"primary-background\">\n          <h4 className=\"rules-header\">Final notes</h4>\n          <p className=\"rules-p\">If you find any bugs or issues with Straight 5 please submit an issue by <a href=\"https://github.com/andyrewwer/straight5/issues\">clicking here</a> or you can email me at <a href=\"mailto:a.andyrewwer@gmail.com?subject = Feedback on Straight 5\">a.andyrewwer@gmail.com.</a> Also feel free to email me with other thoughts/feedback/concerns (about the game or otherwise)!</p>\n        </div>\n\n      </div>\n  )}\n}\n\nexport default Hand;\n","import React, { Component } from 'react';\nimport Hand from './game/Hand.js';\nimport MiddleSection from './game/MiddleSection.js';\nimport FooterSection from './game/FooterSection.js';\nimport RulesSection from './RulesSection.js';\nimport './Straight5.css';\nconst {ActionType, AppMode, DrawType, MoveState, TokenType} = require('../model/Enums.js')\n\nclass Straight5 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      AppMode: AppMode.START_STATE,\n      MoveState: MoveState.START_STATE,\n    };\n    this.playerService = props.playerService;\n    this.gameService = props.gameService;\n    this.configService = props.configService;\n  }\n\n  StartNewGame = () => {\n    this.playerService.resetPlayers();\n    this.gameService.startNewGame();\n    this.setState({\n      MoveState: MoveState.START_STATE,\n      AppMode: AppMode.GAME\n    });\n  }\n\n  DrawCard = (type, index) => {\n    if (this.state.MoveState !== MoveState.START_STATE) {\n      //TODO animation?\n      return;\n    }\n    if (type === DrawType.DECK) {\n      this.gameService.drawCardFromDeck();\n    } else if (type === DrawType.DISCARD) {\n\n      this.gameService.drawCardFromDiscard(index);\n    } else {\n      console.error('draw card failed', type);\n    }\n    this.setState({\n      MoveState: MoveState.CARD_DRAWN\n    });\n\n  }\n\n  ReplaceCard = index => {\n    this.gameService.replaceCard(index);\n    this.EndMove();\n  }\n\n  DiscardCard = () => {\n    this.gameService.discardActiveCard();\n  }\n\n  TurnCardFaceUp = index => {\n    if (!this.gameService.turnCardFaceUp(index)) {\n      return;\n    }\n    if (this.state.MoveState === MoveState.CARD_DISCARDED) {\n      this.EndMove();\n      return;\n    }\n    if (this.gameService.activePlayerHasAllCardsFaceUp()) {\n      this.EndMove();\n      return;\n    }\n    this.setState({\n      MoveState: MoveState.CARD_DISCARDED,\n    });\n  }\n\n  SwapCards = index => {\n    if (this.gameService.swapIsValid(index)) {\n      this.gameService.swapCards(index);\n      this.EndMove();\n      return\n    }\n    this.gameService.setSwapCardIndex(index);\n    this.setState({\n      MoveState: MoveState.SWAP_IN_PROGRESS\n    })\n  }\n\n  EndMove = () => {\n    if (this.gameService.activePlayerCanClaimToken()) {\n      this.setState({MoveState: MoveState.PRE_END_STATE});\n      return;\n    }\n    this.ChangeTurn();\n\n  }\n\n  checkIfWinner() {\n    if (this.gameService.getActivePlayersTokens().length >= 4) {\n      this.setState({\n        AppMode: AppMode.PLAYER_WIN\n      });\n      return true;\n    }\n    return false;\n  }\n\n  ClaimTokenCardPress = index => {\n    if (this.gameService.isValidIndexForToken(index)) {\n      this.gameService.claimToken(index);\n      if (!this.checkIfWinner()) {\n        return this.ChangeTurn();\n      }\n    } else {\n      console.error('invalid index :(')\n    }\n  }\n\n  ChangeTurn = () => {\n    this.gameService.nextPlayer();\n    return this.setState({\n      MoveState: MoveState.START_STATE\n    });\n  }\n\n  handleActionButtonPressed = (action, token) => {\n    if (action === ActionType.PASS) {\n      if (this.state.MoveState === MoveState.CARD_DRAWN) {\n        this.DiscardCard()\n      }\n      return this.EndMove();\n    }\n    if (action === ActionType.SWAP) {\n      this.setState({MoveState: MoveState.SWAP_CHOSEN})\n      return this.DiscardCard()\n    }\n    if (action === ActionType.CHANGE_TURN) {\n      return this.ChangeTurn()\n    }\n    if (action === ActionType.TURN_FACE_UP) {\n      this.setState({MoveState: MoveState.DISCARD_CHOSEN})\n      return this.DiscardCard()\n    }\n    if (action === ActionType.CLAIM_TOKEN) {\n      this.gameService.setTokenToClaim(token);\n      if([TokenType.THREE_OF_A_KIND, TokenType.FULL_HOUSE, TokenType.FIVE_IN_A_ROW].includes(token)) {\n        // this could be smarter if only one option for three / four in a row\n        this.gameService.claimToken();\n        if (!this.checkIfWinner()) {\n          return this.ChangeTurn();\n        }\n      }\n      // TODO COME BACK TO THIS LATER, would like more auto-claim for 3/4 in a row\n      // TODO Less autoclaim if multiple options for three of a\n      this.setState({\n        MoveState: MoveState.CLAIMING_TOKEN\n      });\n    }\n  }\n\n  handlePlayerCardPressed = (player, index)  =>  {\n    if (player !== this.gameService.getActivePlayerIndex()) {\n      console.log('card from wrong player clicked')\n      return;\n    }\n    switch (this.state.MoveState) {\n      case MoveState.CARD_DRAWN:\n        this.ReplaceCard(index)\n        break;\n      case MoveState.DISCARD_CHOSEN:\n      case MoveState.CARD_DISCARDED:\n        this.TurnCardFaceUp(index);\n        break\n      case MoveState.SWAP_CHOSEN:\n      case MoveState.SWAP_IN_PROGRESS:\n        this.SwapCards(index)\n        break\n      case MoveState.CLAIMING_TOKEN:\n        this.ClaimTokenCardPress(index);\n        break;\n      default:\n        console.log('No action for this status', this.state.MoveState)\n    }\n  }\n  // TODO SHOW ACTIVE PLAYER\n  // TODO ADD joker\n  // TODO ADD AI\n  // TODO  state service instead of this.state\n\n  // TODO MUM gap between hands and footer sectoin. Maybe footsection has constant size.\n  render = () => {\n    return (\n  <div className={this.state.AppMode === AppMode.START_STATE ? 'CardTable' : 'CardTable CardTableGame'}>\n    <h2 className=\"startHeader\" data-testid=\"start-header\">\n      Straight 5\n    </h2>\n    {this.state.AppMode === AppMode.START_STATE &&\n    <React.Fragment>\n        <RulesSection/>\n        <div className=\"mb-4 mt-2\">\n          <button className=\"small-width-button\" onClick={this.StartNewGame}>Start New Game</button>\n        </div>\n\n    </React.Fragment>}\n\n    {this.state.AppMode  === AppMode.GAME &&\n    <React.Fragment>\n      <Hand gameService={this.gameService} moveState={this.state.MoveState} playerService={this.playerService} id={0} cardPressedCallback={this.handlePlayerCardPressed} />\n      <MiddleSection gameService={this.gameService} drawCallback={this.DrawCard} moveState={this.state.MoveState}/>\n      <Hand gameService={this.gameService} moveState={this.state.MoveState} playerService={this.playerService} id={1} cardPressedCallback={this.handlePlayerCardPressed} />\n      <FooterSection gameService={this.gameService} moveState={this.state.MoveState} buttonPressedCallback={this.handleActionButtonPressed} />\n    </React.Fragment>}\n\n    {this.state.AppMode === AppMode.PLAYER_WIN &&\n    <React.Fragment>\n        <div className=\"mb-4\" data-testid=\"win-header\">\n        Congratulations to Player {this.gameService.getActivePlayerIndex()+1}\n        <button data-testid=\"win-startNewGame\" className=\"mt-2\" onClick={this.StartNewGame}>Start a new Game</button>\n        </div>\n    </React.Fragment>}\n  </div>\n  )}\n}\n\nexport default Straight5;\n","import React from 'react';\nimport './App.css';\nimport Straight5 from './components/Straight5.js';\nconst { GameService } = require('./service/GameService.js')\nconst { PlayerService } = require('./service/PlayerService.js')\nconst { ConfigService } = require('./service/ConfigService.js')\n\nfunction App() {\n  const configService = new ConfigService(6, 9, 2, 2);\n  const playerService = new PlayerService(configService)\n  const gameService = new GameService(playerService, configService);\n  return (\n    <div className=\"App\">\n      <header>\n      <div className=\"Container\">\n\n        <Straight5 playerService={playerService} gameService={gameService} configService={configService}></Straight5>\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}